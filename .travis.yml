language: python
os: linux
dist: xenial
deploy:
  provider: pypi
  user: "__token__"
  password:
    secure: "pypi-AgEIcHlwaS5vcmcCJDk3OWI0NmFlLTgyZWItNGZmMy1hNjg0LTYwN2ZiODNmMTE5YwACJXsicGVybWlzc2lvbnMiOiAidXNlciIsICJ2ZXJzaW9uIjogMX0AAAYgkp-_tQxVPRYY5GdO9TL69mgLZeZ32PqnGv4NtdEqer4"
  distributions: "sdist"
  skip_existing: true
branches:
  only:
  - master
install:
- pip install -r build-requirements.txt
- python setup.py install
script:
- pip install -r requirements.txt
- pytest tests